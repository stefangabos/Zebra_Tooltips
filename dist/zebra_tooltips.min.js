!function(b){"use strict";b.Zebra_Tooltips=function(t,l){var c,f,w,m,n={animation_speed:250,animation_offset:20,close_on_click:!0,content:!(this.version="2.3.0"),hide_delay:100,keep_visible:!0,max_width:250,opacity:".95",position:"center",prerender:!1,show_delay:100,vertical_alignment:"above",vertical_offset:0,onBeforeHide:null,onHide:null,onBeforeShow:null,onShow:null},r=function(o){var t,e,i,a,l,n,r,_,s,p,d=o.data("Zebra_Tooltip"),h=b(window);return d.tooltip||(t=b("<div>",{"class":"Zebra_Tooltip",css:{opacity:0,display:"block"}}),e=b("<div>",{"class":"Zebra_Tooltip_Message",css:{maxWidth:d.max_width}}).html(d.content).appendTo(t),s=b("<div>",{"class":"Zebra_Tooltip_Arrow"}).appendTo(t),i=b("<div>").addClass("Zebra_Tooltip_Arrow_Border").appendTo(s),b("<div>").appendTo(s),d.keep_visible&&(t.on("mouseleave"+(d.close_on_click?" click":""),function(){T(o)}),t.on("mouseenter",function(){u(o)})),t.appendTo("body"),d.sticky&&e.addClass("Zebra_Tooltip_Has_Close"),r=t.outerWidth(),_=t.outerHeight(),p=i.outerWidth(),a=i.outerHeight(),l=e.outerWidth(),n=e.outerHeight(),t.css({width:(d={tooltip:t,tooltip_width:r,tooltip_height:_+a/2,message:e,arrow_container:s,arrow_width:p,arrow_height:a,arrow:i}).tooltip_width,height:d.tooltip_height}),d.tooltip_width=d.tooltip_width+(e.outerWidth()-l),d.tooltip_height=d.tooltip_height+(e.outerHeight()-n),t.css({width:d.tooltip_width+1,height:d.tooltip_height,display:"none"}),d=b.extend(o.data("Zebra_Tooltip"),d),o.data("Zebra_Tooltip",d)),d.sticky&&!d.close&&(b("<a>",{"class":"Zebra_Tooltip_Close",href:"javascript:void(0)"}).html("&times;").on("click",function(t){t.preventDefault();t=o.data("Zebra_Tooltip");t.sticky=!1,o.data("Zebra_Tooltip",t),T(o)}).appendTo(d.message),d.close=!0,d=b.extend(o.data("Zebra_Tooltip"),d),o.data("Zebra_Tooltip",d)),c=h.width(),f=h.height(),r=o.offset(),b.extend(d,{element_left:r.left,element_top:r.top,element_width:o.outerWidth(),element_height:o.outerHeight()}),m=h.scrollTop(),w=h.scrollLeft(),_="left"===d.position?d.element_left-d.tooltip_width+d.arrow_width:"right"===d.position?d.element_left+d.element_width-d.arrow_width:d.element_left+(d.element_width-d.tooltip_width)/2,s=d.element_top-d.tooltip_height,p="left"===d.position?d.tooltip_width-d.arrow_width-d.arrow_width/2:"right"===d.position?d.arrow_width/2:(d.tooltip_width-d.arrow_width)/2,_+d.tooltip_width>c+w&&(p-=c+w-(_+d.tooltip_width)-6,(_=c+w-d.tooltip_width-6)+(p=p+d.arrow_width>d.tooltip_width-6?d.tooltip_width-6-d.arrow_width:p)+d.arrow_width/2<d.element_left)&&(p=-1e4),_<w&&(p-=w-_,(_=w+2)+(p=p<0?d.arrow_width/2:p)+d.arrow_width/2>d.element_left+d.element_width)&&(p=-1e4),d.message.css("margin-top",""),d.arrow_container.removeClass("Zebra_Tooltip_Arrow_Top").addClass("Zebra_Tooltip_Arrow_Bottom"),s<m||"below"===d.vertical_alignment&&d.element_top+d.element_height+d.vertical_offset+d.tooltip_height+d.animation_offset<f+m?(s=d.element_top+d.element_height-d.vertical_offset,d.animation_offset=Math.abs(d.animation_offset),d.message.css("margin-top",d.arrow_height/2),d.arrow_container.removeClass("Zebra_Tooltip_Arrow_Bottom").addClass("Zebra_Tooltip_Arrow_Top")):(d.animation_offset=-Math.abs(d.animation_offset),s+=d.vertical_offset),d.arrow_container.css("left",p),d.tooltip.css({left:_,top:s}),b.extend(d,{tooltip_left:_,tooltip_top:s,arrow_left:p}),d=b.extend(o.data("Zebra_Tooltip"),d),o.data("Zebra_Tooltip",d),d},u=function(t){var o=t.data("Zebra_Tooltip");clearTimeout(o.show_timeout),o.muted||(clearTimeout(o.hide_timeout),o.show_timeout=setTimeout(function(){(o=r(t)).onBeforeShow&&"function"==typeof o.onBeforeShow&&!1===o.onBeforeShow(t,o.tooltip)||("block"!==o.tooltip.css("display")&&o.tooltip.css({top:o.tooltip_top+o.animation_offset}),o.tooltip.css("display","block"),o.tooltip.stop(),o.tooltip.animate({top:o.tooltip_top,opacity:o.opacity},o.animation_speed,function(){o.onShow&&"function"==typeof o.onShow&&o.onShow(t,o.tooltip)}))},o.show_delay))},T=function(t){var o=t.data("Zebra_Tooltip");clearTimeout(o.hide_timeout),o.sticky||(clearTimeout(o.show_timeout),o.hide_timeout=setTimeout(function(){!o.tooltip||o.onBeforeHide&&"function"==typeof o.onBeforeHide&&!1===o.onBeforeHide(t,o.tooltip)||(o.close=!1,o.destroy&&(o.muted=!0),t.data("Zebra_Tooltip",o),b("a.Zebra_Tooltip_Close",o.tooltip).remove(),o.tooltip.stop(),o.tooltip.animate({opacity:0,top:o.tooltip_top+o.animation_offset},o.animation_speed,function(){b(this).css("display","none"),o.onHide&&"function"==typeof o.onHide&&o.onHide(t,o.tooltip)}))},o.hide_delay))};this.hide=function(t,e){t.each(function(){var t=b(this),o=t.data("Zebra_Tooltip");o&&(o.sticky=!1,e&&(o.destroy=!0),t.data("Zebra_Tooltip",o),T(t))})},this.show=function(t,e){t.each(function(){var t=b(this),o=t.data("Zebra_Tooltip");o&&(o.sticky=!0,o.muted=!1,e&&(o.destroy=!0),t.data("Zebra_Tooltip",o),u(t))})},t.each(function(){var t,o=b(this),e=o.attr("title"),i=o.data(),a={};for(t in i)0===t.indexOf("ztt_")&&(t=t.replace(/^ztt\_/,""),undefined!==n[t])&&(a[t]=i["ztt_"+t]);a=b.extend(n,l,a),e&&(a.content=o.attr("title")),undefined!==a.content&&""!==a.content.trim()&&(o.on("mouseenter focus",function(){e&&b(this).attr("title",""),u(o)}),o.on("mouseleave blur",function(){T(o),e&&b(this).attr("title",e)}),o.data("Zebra_Tooltip",b.extend({tooltip:null,show_timeout:null,hide_timeout:null,sticky:!1,destroy:!1,muted:!1},a)),a.prerender)&&r(o)})}}(jQuery);