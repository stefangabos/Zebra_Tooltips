!function(k){"use strict";k.Zebra_Tooltips=function(t,o){var g,u,T,b,n={animation_speed:250,animation_offset:20,close_on_click:!0,content:!(this.version="2.0.2"),hide_delay:100,keep_visible:!0,max_width:250,opacity:".95",position:"center",prerender:!1,show_delay:100,vertical_alignment:"above",vertical_offset:0,onBeforeHide:null,onHide:null,onBeforeShow:null,onShow:null},v=this,s=function(e){var t,o,i,n,s,a,l,r,_,p,d,h,c,f,w=e.data("Zebra_Tooltip"),m=k(window);return w.tooltip||(t=k("<div>",{"class":"Zebra_Tooltip",css:{opacity:0,display:"block"}}),o=k("<div>",{"class":"Zebra_Tooltip_Message",css:{maxWidth:v.settings.max_width}}).html(v.settings.content?v.settings.content:w.content).appendTo(t),i=k("<div>",{"class":"Zebra_Tooltip_Arrow"}).appendTo(t),n=k("<div>").addClass("Zebra_Tooltip_Arrow_Border").appendTo(i),k("<div>").appendTo(i),v.settings.keep_visible&&(t.on("mouseleave"+(v.settings.close_on_click?" click":""),function(){Z(e)}),t.on("mouseenter",function(){y(e)})),t.appendTo("body"),w.sticky&&o.addClass("Zebra_Tooltip_Has_Close"),s=t.outerWidth(),a=t.outerHeight(),l=n.outerWidth(),r=n.outerHeight(),_=o.outerWidth(),p=o.outerHeight(),w={tooltip:t,tooltip_width:s,tooltip_height:a+r/2,message:o,arrow_container:i,arrow_width:l,arrow_height:r,arrow:n},t.css({width:w.tooltip_width,height:w.tooltip_height}),w.tooltip_width=w.tooltip_width+(o.outerWidth()-_),w.tooltip_height=w.tooltip_height+(o.outerHeight()-p),t.css({width:w.tooltip_width,height:w.tooltip_height,display:"none"}),w=k.extend(e.data("Zebra_Tooltip"),w),e.data("Zebra_Tooltip",w)),w.sticky&&!w.close&&(k("<a>",{"class":"Zebra_Tooltip_Close",href:"javascript:void(0)"}).html("&times;").on("click",function(t){t.preventDefault();var o=e.data("Zebra_Tooltip");o.sticky=!1,e.data("Zebra_Tooltip",o),Z(e)}).appendTo(w.message),w.close=!0,w=k.extend(e.data("Zebra_Tooltip"),w),e.data("Zebra_Tooltip",w)),g=m.width(),u=m.height(),d=e.offset(),k.extend(w,{element_left:d.left,element_top:d.top,element_width:e.outerWidth(),element_height:e.outerHeight()}),b=m.scrollTop(),T=m.scrollLeft(),h="left"===v.settings.position?w.element_left-w.tooltip_width+w.arrow_width:"right"===v.settings.position?w.element_left+w.element_width-w.arrow_width:w.element_left+(w.element_width-w.tooltip_width)/2,c=w.element_top-w.tooltip_height,f="left"===v.settings.position?w.tooltip_width-w.arrow_width-w.arrow_width/2:"right"===v.settings.position?w.arrow_width/2:(w.tooltip_width-w.arrow_width)/2,h+w.tooltip_width>g+T&&(f-=g+T-(h+w.tooltip_width)-6,h=g+T-w.tooltip_width-6,f+w.arrow_width>w.tooltip_width-6&&(f=w.tooltip_width-6-w.arrow_width),h+f+w.arrow_width/2<w.element_left&&(f=-1e4)),h<T&&(f-=T-h,h=T+2,f<0&&(f=w.arrow_width/2),h+f+w.arrow_width/2>w.element_left+w.element_width&&(f=-1e4)),w.message.css("margin-top",""),w.arrow_container.removeClass("Zebra_Tooltip_Arrow_Top").addClass("Zebra_Tooltip_Arrow_Bottom"),c<b||"below"===v.settings.vertical_alignment&&w.element_top+w.element_height+v.settings.vertical_offset+w.tooltip_height+w.animation_offset<u+b?(c=w.element_top+w.element_height-v.settings.vertical_offset,w.animation_offset=Math.abs(w.animation_offset),w.message.css("margin-top",w.arrow_height/2),w.arrow_container.removeClass("Zebra_Tooltip_Arrow_Bottom").addClass("Zebra_Tooltip_Arrow_Top")):(w.animation_offset=-Math.abs(w.animation_offset),c+=v.settings.vertical_offset),w.arrow_container.css("left",f),w.tooltip.css({left:h,top:c}),k.extend(w,{tooltip_left:h,tooltip_top:c,arrow_left:f}),w=k.extend(e.data("Zebra_Tooltip"),w),e.data("Zebra_Tooltip",w),w},y=function(t){var o=t.data("Zebra_Tooltip");clearTimeout(o.show_timeout),o.muted||(clearTimeout(o.hide_timeout),o.show_timeout=setTimeout(function(){o=s(t),v.settings.onBeforeShow&&"function"==typeof v.settings.onBeforeShow&&!1===v.settings.onBeforeShow(t,o.tooltip)||("block"!==o.tooltip.css("display")&&o.tooltip.css({top:o.tooltip_top+o.animation_offset}),o.tooltip.css("display","block"),o.tooltip.stop(),o.tooltip.animate({top:o.tooltip_top,opacity:v.settings.opacity},v.settings.animation_speed,function(){v.settings.onShow&&"function"==typeof v.settings.onShow&&v.settings.onShow(t,o.tooltip)}))},v.settings.show_delay))},Z=function(t){var o=t.data("Zebra_Tooltip");clearTimeout(o.hide_timeout),o.sticky||(clearTimeout(o.show_timeout),o.hide_timeout=setTimeout(function(){if(o.tooltip){if(v.settings.onBeforeHide&&"function"==typeof v.settings.onBeforeHide&&!1===v.settings.onBeforeHide(t,o.tooltip))return;o.close=!1,o.destroy&&(o.muted=!0),t.data("Zebra_Tooltip",o),k("a.Zebra_Tooltip_Close",o.tooltip).remove(),o.tooltip.stop(),o.tooltip.animate({opacity:0,top:o.tooltip_top+o.animation_offset},v.settings.animation_speed,function(){k(this).css("display","none"),v.settings.onHide&&"function"==typeof v.settings.onHide&&v.settings.onHide(t,o.tooltip)})}},v.settings.hide_delay))};v.settings={},v.hide=function(t,e){t.each(function(){var t=k(this),o=t.data("Zebra_Tooltip");o&&(o.sticky=!1,e&&(o.destroy=!0),t.data("Zebra_Tooltip",o),Z(t))})},v.show=function(t,e){t.each(function(){var t=k(this),o=t.data("Zebra_Tooltip");o&&(o.sticky=!0,o.muted=!1,e&&(o.destroy=!0),t.data("Zebra_Tooltip",o),y(t))})},v.settings=k.extend({},n,o),t.each(function(){var t,o=k(this),e=o.attr("title"),i=o.data();for(t in i)0===t.indexOf("ztt_")&&(t=t.replace(/^ztt\_/,""),void 0!==n[t]&&(v.settings[t]=o.data("ztt_"+t)));e&&(v.settings.content=o.attr("title")),void 0!==v.settings.content&&""!==v.settings.content.trim()&&(o.on({mouseenter:function(){e&&k(this).attr("title",""),y(o)},mouseleave:function(){Z(o),e&&k(this).attr("title",e)}}),o.data("Zebra_Tooltip",{tooltip:null,content:v.settings.content,show_timeout:null,hide_timeout:null,animation_offset:v.settings.animation_offset,sticky:!1,destroy:!1,muted:!1}),v.settings.prerender&&s(o))})}}($);